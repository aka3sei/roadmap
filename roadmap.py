import streamlit as st

# ページ設定
st.set_page_config(page_title="不動産取引完全ガイド", layout="centered")

st.title("🗺️ 不動産取引・詳細ロードマップ")
st.write("各工程の「具体的な内容」と「重要ポイント」を解説します。")

# タブ切り替え
tab_sell, tab_buy = st.tabs(["🏠 売却の全工程", "🔑 購入の全工程"])

# ==========================================
# 🏠 売却セクションの詳細
# ==========================================
with tab_sell:
    sell_steps = [
        "1.売買相談", "2.物件調査", "3.査定", "4.媒介契約", 
        "5.インスペクション", "6.広告・売却活動", "7.契約交渉", 
        "8.重要事項説明", "9.引渡・登記・決済"
    ]
    
    sell_details = {
        "1.売買相談": {
            "内容": "売却の動機（住み替え、資産整理など）を整理し、目標金額や時期を決定します。",
            "ポイント": "「いつまでに売りたいか」を明確にすることで、販売戦略（強気か早期か）が決まります。"
        },
        "2.物件調査": {
            "内容": "権利関係（登記簿）、法令制限（都市計画法等）、インフラ（上下水道）を調査します。",
            "ポイント": "境界標の有無や、建物に付随する越境物がないか等を事前に把握しトラブルを防ぎます。"
        },
        "3.査定": {
            "内容": "近隣の成約事例や公示地価、建物の状態を基に価格を算出します。",
            "ポイント": "「机上査定」だけでなく、実際に現地を見る「訪問査定」で精度の高い価格を出します。"
        },
        "4.媒介契約": {
            "内容": "不動産会社に正式に売却を依頼する契約です。",
            "ポイント": "「専任媒介」や「専属専任」を選ぶと、販売状況の報告義務が生じ、より積極的な活動が期待できます。"
        },
        "5.インスペクション": {
            "内容": "専門家による建物の劣化状況（雨漏り、シロアリ等）の診断です。",
            "ポイント": "事前に診断を受けることで、買主への安心感が高まり、値引き交渉の抑制に繋がります。"
        },
        "6.広告・売却活動": {
            "内容": "レインズへの登録、ポータルサイト掲載、現地看板の設置などを行います。",
            "ポイント": "物件写真は非常に重要です。明るく清潔感のある写真で「内覧希望」を増やします。"
        },
        "7.契約交渉": {
            "内容": "購入希望者から届く「買付証明書」を基に、価格や引渡し時期を調整します。",
            "ポイント": "単なる値引きだけでなく、引渡し時期を合わせることで有利に交渉できる場合もあります。"
        },
        "8.重要事項説明": {
            "内容": "買主に対し、物件の法的リスクや状態について宅建士が説明します。",
            "ポイント": "告知事項（雨漏り歴など）は正直に伝えましょう。後の「契約不適合責任」を防ぐためです。"
        },
        "9.引渡・登記・決済": {
            "内容": "残代金の受領、鍵の引き渡し、所有権移転登記の申請を同時に行います。",
            "ポイント": "住宅ローンの残債がある場合は、このタイミングで抵当権抹消の手続きも併せて行います。"
        }
    }

    current_sell = st.select_slider("現在のステップ", options=sell_steps, key="s_slider")
    
    # 詳細表示
    st.markdown(f"### 📍 {current_sell}")
    col_s1, col_s2 = st.columns(2)
    with col_s1:
        st.info(f"**📝 具体的な内容**\n\n{sell_details[current_sell]['内容']}")
    with col_s2:
        st.success(f"**💡 プロのアドバイス**\n\n{sell_details[current_sell]['ポイント']}")

    st.progress((sell_steps.index(current_sell) + 1) / len(sell_steps))
    

# ==========================================
# 🔑 購入セクションの詳細
# ==========================================
with tab_buy:
    buy_steps = [
        "1.購入相談", "2.資金計画", "3.物件調査", "4.購入申込", 
        "5.契約交渉", "6.媒介契約", "7.重要事項説明", 
        "8.売買契約締結", "9.住宅ローン審査", "10.引渡・登記・決済"
    ]
    
    buy_details = {
        "1.購入相談": {
            "内容": "希望エリア、予算、広さ、入居時期などの条件を整理します。",
            "ポイント": "「絶対に譲れない条件」を3つ決めておくと、物件選びで迷わなくなります。"
        },
        "2.資金計画": {
            "内容": "自己資金、借入可能額、諸費用（仲介手数料、税金等）を計算します。",
            "ポイント": "購入後のランニングコスト（管理費、固定資産税）も含めて検討することが重要です。"
        },
        "3.物件調査": {
            "内容": "内見を行い、日当たり、管理状態、周辺施設、ハザードマップを確認します。",
            "ポイント": "平日の夜や雨の日など、条件を変えて周辺を歩くと意外な発見があります。"
        },
        "4.購入申込": {
            "内容": "買付証明書（購入申込書）を売主に提出し、意思表示をします。",
            "ポイント": "人気物件は数時間で埋まります。即断即決できるよう、事前準備を済ませておきましょう。"
        },
        "5.契約交渉": {
            "内容": "価格交渉や引渡し時期、設備の補修有無などを売主側と調整します。",
            "ポイント": "無理な値引きは契約不成立の元。誠意を持った条件提示が成約への近道です。"
        },
        "6.媒介契約": {
            "内容": "購入サポートを依頼する不動産会社と契約を結びます。",
            "ポイント": "仲介手数料の支払いタイミング（契約時50%、引渡時50%など）を確認しておきましょう。"
        },
        "7.重要事項説明": {
            "内容": "物件の権利、法令、設備、管理規約等の重要事項を宅建士から聞きます。",
            "ポイント": "聞き慣れない専門用語が多いので、前日までに「重説案」をメールでもらい、読んでおくのがベストです。"
        },
        "8.売買契約締結": {
            "内容": "契約書に署名捺印し、手付金を支払います。",
            "ポイント": "手付金は一般的に物件価格の5〜10%です。現金または振込の準備が必要です。"
        },
        "9.住宅ローン審査": {
            "内容": "金融機関へ本審査を申し込みます。",
            "ポイント": "事前審査（仮審査）が通っていても、本審査で否決される場合も。他での大きな買い物は控えましょう。"
        },
        "10.引渡・登記・決済": {
            "内容": "ローンが実行され、残代金を支払い、鍵を受け取ります。",
            "ポイント": "住民票の移動や火災保険の加入など、この日までに済ませるタスクが多いのでリスト化しましょう。"
        }
    }

    current_buy = st.select_slider("現在のステップ", options=buy_steps, key="b_slider")
    
    st.markdown(f"### 📍 {current_buy}")
    col_b1, col_b2 = st.columns(2)
    with col_b1:
        st.info(f"**📝 具体的な内容**\n\n{buy_details[current_buy]['内容']}")
    with col_b2:
        st.success(f"**💡 プロのアドバイス**\n\n{buy_details[current_buy]['ポイント']}")

    st.progress((buy_steps.index(current_buy) + 1) / len(buy_steps))
    

st.divider()
st.caption("※本内容は一般的な取引の流れを解説したものであり、実際の取引では各不動産会社の規定に従ってください。")